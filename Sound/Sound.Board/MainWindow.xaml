<Window x:Class="SoundBoard.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Sound.Board" Height="560" Width="780"
        MinHeight="400" MinWidth="560"
        Background="#1A1A1A" Foreground="#E0E0E0"
        WindowStartupLocation="CenterScreen"
        Closing="Window_Closing">
    <Window.Resources>
        <!-- 공통 브러시 -->
        <SolidColorBrush x:Key="PanelBg"    Color="#242424"/>
        <SolidColorBrush x:Key="Border"     Color="#333333"/>
        <SolidColorBrush x:Key="Accent"     Color="#8E44AD"/>
        <SolidColorBrush x:Key="AccentHov"  Color="#A569BD"/>
        <SolidColorBrush x:Key="TextPri"    Color="#E0E0E0"/>
        <SolidColorBrush x:Key="TextSec"    Color="#888888"/>

        <!-- 상단 버튼 스타일 -->
        <Style x:Key="TopBtn" TargetType="Button">
            <Setter Property="Background"      Value="#333333"/>
            <Setter Property="Foreground"      Value="{StaticResource TextPri}"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding"         Value="12,6"/>
            <Setter Property="FontSize"        Value="12"/>
            <Setter Property="Cursor"          Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" CornerRadius="4"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#444444"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Opacity" Value="0.4"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="AccentBtn" TargetType="Button" BasedOn="{StaticResource TopBtn}">
            <Setter Property="Background" Value="{StaticResource Accent}"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="{StaticResource AccentHov}"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Slider -->
        <Style TargetType="Slider">
            <Setter Property="Foreground" Value="{StaticResource Accent}"/>
        </Style>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- ═══ 상단 툴바 ═══ -->
        <Border Grid.Row="0" Background="{StaticResource PanelBg}"
                BorderBrush="{StaticResource Border}" BorderThickness="0,0,0,1" Padding="12,8">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- 앱 타이틀 -->
                <TextBlock Grid.Column="0" Text="Sound.Board" FontSize="15" FontWeight="Bold"
                           Foreground="{StaticResource Accent}" VerticalAlignment="Center" Margin="0,0,16,0"/>

                <!-- 버튼 추가 -->
                <Button Grid.Column="1" Content="+ 추가" Style="{StaticResource AccentBtn}"
                        Margin="0,0,6,0" Click="Add_Click"/>

                <!-- 편집 모드 토글 -->
                <ToggleButton Grid.Column="2" x:Name="EditModeToggle" Content="편집 모드"
                              Margin="0,0,6,0" Padding="12,6" FontSize="12" Cursor="Hand"
                              Background="#333333" Foreground="{StaticResource TextPri}"
                              BorderThickness="0" Checked="EditMode_Changed" Unchecked="EditMode_Changed">
                    <ToggleButton.Template>
                        <ControlTemplate TargetType="ToggleButton">
                            <Border x:Name="Bd" Background="#333333" CornerRadius="4"
                                    Padding="{TemplateBinding Padding}">
                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsChecked" Value="True">
                                    <Setter TargetName="Bd" Property="Background" Value="#8E44AD"/>
                                    <Setter TargetName="Bd" Property="BorderBrush" Value="#A569BD"/>
                                    <Setter TargetName="Bd" Property="BorderThickness" Value="1"/>
                                </Trigger>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter TargetName="Bd" Property="Opacity" Value="0.85"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </ToggleButton.Template>
                </ToggleButton>

                <!-- 전체 정지 -->
                <Button Grid.Column="3" Content="■ 정지" Style="{StaticResource TopBtn}"
                        HorizontalAlignment="Left" Click="StopAll_Click"/>

                <!-- 오버랩 토글 -->
                <CheckBox Grid.Column="4" x:Name="OverlapCheck" Content="겹쳐 재생"
                          Foreground="{StaticResource TextSec}" FontSize="11"
                          VerticalAlignment="Center" Margin="0,0,12,0"
                          Checked="Overlap_Changed" Unchecked="Overlap_Changed"/>

                <!-- 볼륨 라벨 -->
                <TextBlock Grid.Column="5" Text="볼륨" FontSize="11"
                           Foreground="{StaticResource TextSec}" VerticalAlignment="Center" Margin="0,0,8,0"/>

                <!-- 볼륨 슬라이더 -->
                <Slider Grid.Column="6" x:Name="VolumeSlider" Width="100" Minimum="0" Maximum="1"
                        Value="0.8" SmallChange="0.05" LargeChange="0.1"
                        VerticalAlignment="Center" ValueChanged="Volume_Changed"/>
            </Grid>
        </Border>

        <!-- ═══ 사운드 버튼 보드 ═══ -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto"
                      HorizontalScrollBarVisibility="Disabled" Background="#1A1A1A">
            <WrapPanel x:Name="ButtonBoard" Margin="12" AllowDrop="True" Drop="Board_Drop"
                       DragOver="Board_DragOver"/>
        </ScrollViewer>
    </Grid>
</Window>
