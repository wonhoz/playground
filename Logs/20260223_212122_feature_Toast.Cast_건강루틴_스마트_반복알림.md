# [feature] Toast.Cast — 건강 루틴 스마트 반복 알림 앱 개발

- **일시**: 2026-02-23 21:09 ~ 21:21 KST
- **브랜치**: `feature/toast-cast`
- **참고 아이디어**: `ideas/idea_20260223_050329.md` (#8 Toast.Cast)

---

## 개요

개발자가 장시간 모니터 앞에 앉아 있을 때 눈 휴식, 스트레칭, 물 마시기 등을 잊지 않도록 도와주는 **건강 루틴 스마트 반복 알림** 트레이 앱.

---

## 구현 사항

### 프로젝트 구조
```
Applications/Health/Toast.Cast/
├── Toast.Cast.csproj           # .NET 8.0 WinForms, net8.0-windows
├── Program.cs                  # 진입점
├── TrayApp.cs                  # 트레이 아이콘 + 컨텍스트 메뉴 + 루틴 타이머
├── DarkMenuRenderer.cs         # 다크 테마 컨텍스트 메뉴 렌더러
├── CountdownOverlay.cs         # 반투명 카운트다운 오버레이 창
├── SettingsWindow.cs           # 루틴 설정 창
├── StatsWindow.cs              # 주간 달성률 통계 창
├── Models/
│   ├── Routine.cs              # 루틴 정의 (기본 4종 포함)
│   ├── RoutineRecord.cs        # 달성 기록 (1건 = 1번 알림)
│   └── AppConfig.cs            # 앱 설정 (JSON 저장/로드)
└── Services/
    ├── IdleDetectionService.cs # GetLastInputInfo Win32 API로 유휴 감지
    └── StatsService.cs         # 주간 달성률 계산 + 90일 자동 정리
```

### 기본 루틴 4종
| 루틴 | 아이콘 | 간격 | 카운트다운 |
|------|--------|------|-----------|
| 눈 휴식 (20-20-20 법칙) | 👁 | 20분 | 20초 ✅ |
| 물 마시기 | 💧 | 60분 | - |
| 스트레칭 | 🤸 | 90분 | - |
| 자세 교정 | 🪑 | 30분 | - |

### 핵심 기능

1. **루틴 타이머**: 1분마다 `NextFireAt` 체크, 시각 도달 시 알림 발동
2. **유휴 감지**: `GetLastInputInfo` Win32 API → 임계값(기본 5분) 초과 시 자동 스킵
3. **카운트다운 오버레이**: 화면 우측 하단 반투명 창, 초 단위 카운트다운, 건너뛰기 가능
4. **Toast 알림**: 카운트다운 없는 루틴은 `ShowBalloonTip`으로 알림
5. **주간 통계**: 루틴별 달성/예상 횟수 + 진행 바 + 달성률 %
6. **설정 창**: 루틴별 활성화, 간격(분), 카운트다운 ON/OFF, 유휴 임계값 설정
7. **일시정지/재개**: 트레이 메뉴에서 즉시 전환
8. **데이터 저장 경로**: `%APPDATA%\ToastCast\`

### 빌드 결과
- 경고: 0개 / 오류: 0개
- 빌드 시간: ~4초 (첫 빌드), ~1초 (증분 빌드)

---

## 변경된 파일

| 파일 | 변경 내용 |
|------|-----------|
| `Playground.slnx` | `/Applications/Health/` 폴더 추가, Toast.Cast 프로젝트 등록 |
| `+publish-all.cmd` | Toast.Cast 배포 항목 추가 (`ToastCast.exe`) |
| `Applications/Health/Toast.Cast/*` | 신규 프로젝트 전체 생성 |
